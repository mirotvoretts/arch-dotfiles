const { Web3 } = require('web3')

async function main() {
	// 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Web3
	const web3 = new Web3('http://localhost:8545') // –ò–ª–∏ –≤–∞—à RPC URL

	// 2. –ü–æ–ª—É—á–∞–µ–º –∞–∫–∫–∞—É–Ω—Ç—ã
	const accounts = await web3.eth.getAccounts()
	const owner = accounts[0]
	const organization = accounts[1]
	const donor = accounts[2]

	console.log('Owner address:', owner)
	console.log('Organization address:', organization)
	console.log('Donor address:', donor)

	// 3. –ê–¥—Ä–µ—Å–∞ –∏ ABI –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
	const registryAddress = '0x959922bE3CAee4b8Cd9a407cc3ac1C251C2007B1'

	// ABI PlatformRegistry (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è, –≤–∞–º –Ω—É–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª–Ω—ã–π ABI)
	const registryABI = [
		{
            "_format": "hh-sol-artifact-1",
            "contractName": "PlatformRegistry",
            "sourceName": "contracts/PlatformRegistry.sol",
            "abi": [
              {
                "inputs": [
                  {
                    "internalType": "address",
                    "name": "initialOwner",
                    "type": "address"
                  },
                  {
                    "internalType": "uint8",
                    "name": "feePercentage",
                    "type": "uint8"
                  }
                ],
                "stateMutability": "nonpayable",
                "type": "constructor"
              },
              {
                "inputs": [],
                "name": "InvalidFeePercentage",
                "type": "error"
              },
              {
                "inputs": [],
                "name": "OrganizationIsNotVerified",
                "type": "error"
              },
              {
                "inputs": [
                  {
                    "internalType": "address",
                    "name": "owner",
                    "type": "address"
                  }
                ],
                "name": "OwnableInvalidOwner",
                "type": "error"
              },
              {
                "inputs": [
                  {
                    "internalType": "address",
                    "name": "account",
                    "type": "address"
                  }
                ],
                "name": "OwnableUnauthorizedAccount",
                "type": "error"
              },
              {
                "anonymous": false,
                "inputs": [
                  {
                    "indexed": true,
                    "internalType": "address",
                    "name": "_campaignAddress",
                    "type": "address"
                  },
                  {
                    "indexed": true,
                    "internalType": "address",
                    "name": "_creator",
                    "type": "address"
                  }
                ],
                "name": "CampaignCreated",
                "type": "event"
              },
              {
                "anonymous": false,
                "inputs": [
                  {
                    "indexed": true,
                    "internalType": "address",
                    "name": "_organizationAddress",
                    "type": "address"
                  },
                  {
                    "indexed": false,
                    "internalType": "bool",
                    "name": "_isVerified",
                    "type": "bool"
                  }
                ],
                "name": "OrganizationIsVerified",
                "type": "event"
              },
              {
                "anonymous": false,
                "inputs": [
                  {
                    "indexed": true,
                    "internalType": "address",
                    "name": "previousOwner",
                    "type": "address"
                  },
                  {
                    "indexed": true,
                    "internalType": "address",
                    "name": "newOwner",
                    "type": "address"
                  }
                ],
                "name": "OwnershipTransferred",
                "type": "event"
              },
              {
                "inputs": [
                  {
                    "internalType": "address",
                    "name": "_address",
                    "type": "address"
                  }
                ],
                "name": "addFeeCollector",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
              },
              {
                "inputs": [
                  {
                    "internalType": "uint256",
                    "name": "_goal",
                    "type": "uint256"
                  },
                  {
                    "internalType": "uint256",
                    "name": "_deadline",
                    "type": "uint256"
                  }
                ],
                "name": "createCampaign",
                "outputs": [
                  {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                  }
                ],
                "stateMutability": "nonpayable",
                "type": "function"
              },
              {
                "inputs": [
                  {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                  }
                ],
                "name": "feeCollectors",
                "outputs": [
                  {
                    "internalType": "bool",
                    "name": "",
                    "type": "bool"
                  }
                ],
                "stateMutability": "view",
                "type": "function"
              },
              {
                "inputs": [
                  {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                  },
                  {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                  }
                ],
                "name": "organizationCampaign",
                "outputs": [
                  {
                    "internalType": "address",
                    "name": "campaignAddress",
                    "type": "address"
                  },
                  {
                    "internalType": "uint256",
                    "name": "goal",
                    "type": "uint256"
                  },
                  {
                    "internalType": "uint256",
                    "name": "totalDonated",
                    "type": "uint256"
                  },
                  {
                    "internalType": "bool",
                    "name": "isActive",
                    "type": "bool"
                  }
                ],
                "stateMutability": "view",
                "type": "function"
              },
              {
                "inputs": [],
                "name": "owner",
                "outputs": [
                  {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                  }
                ],
                "stateMutability": "view",
                "type": "function"
              },
              {
                "inputs": [],
                "name": "renounceOwnership",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
              },
              {
                "inputs": [
                  {
                    "internalType": "uint8",
                    "name": "_value",
                    "type": "uint8"
                  }
                ],
                "name": "setFeePercentage",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
              },
              {
                "inputs": [
                  {
                    "internalType": "address",
                    "name": "newOwner",
                    "type": "address"
                  }
                ],
                "name": "transferOwnership",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
              },
              {
                "inputs": [
                  {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                  }
                ],
                "name": "verifiedOrganizations",
                "outputs": [
                  {
                    "internalType": "bool",
                    "name": "",
                    "type": "bool"
                  }
                ],
                "stateMutability": "view",
                "type": "function"
              },
              {
                "inputs": [
                  {
                    "internalType": "address",
                    "name": "_organizationAddress",
                    "type": "address"
                  },
                  {
                    "internalType": "bool",
                    "name": "_isVerified",
                    "type": "bool"
                  }
                ],
                "name": "verify",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
              }
            ],
            "bytecode": "0x608060405234801561001057600080fd5b50604051611e59380380611e59833981810160405281019061003291906102f1565b81600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036100a55760006040517f1e4fbdf700000000000000000000000000000000000000000000000000000000815260040161009c9190610340565b60405180910390fd5b6100b48161017660201b60201c565b506100c78160ff1661023a60201b60201c565b6100fd576040517f721dbfea00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b80600060146101000a81548160ff021916908360ff16021790555060018060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550505061035b565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b60008160001115801561024e5750601e8211155b9050919050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006102858261025a565b9050919050565b6102958161027a565b81146102a057600080fd5b50565b6000815190506102b28161028c565b92915050565b600060ff82169050919050565b6102ce816102b8565b81146102d957600080fd5b50565b6000815190506102eb816102c5565b92915050565b6000806040838503121561030857610307610255565b5b6000610316858286016102a3565b9250506020610327858286016102dc565b9150509250929050565b61033a8161027a565b82525050565b60006020820190506103556000830184610331565b92915050565b611aef8061036a6000396000f3fe608060405234801561001057600080fd5b506004361061009e5760003560e01c80638da5cb5b116100665780638da5cb5b1461015c57806391d026b91461017a578063a5766aa614610196578063cb5cd391146101b2578063f2fde38b146101e25761009e565b8063069445dd146100a35780631775f874146100d35780632250226814610106578063715018a6146101365780638d14f0fc14610140575b600080fd5b6100bd60048036038101906100b89190610975565b6101fe565b6040516100ca91906109bd565b60405180910390f35b6100ed60048036038101906100e89190610a0e565b61021e565b6040516100fd9493929190610a6c565b60405180910390f35b610120600480360381019061011b9190610ab1565b610298565b60405161012d9190610af1565b60405180910390f35b61013e6104eb565b005b61015a60048036038101906101559190610b38565b6104ff565b005b6101646105b0565b6040516101719190610af1565b60405180910390f35b610194600480360381019061018f9190610975565b6105d9565b005b6101b060048036038101906101ab9190610bb1565b61063b565b005b6101cc60048036038101906101c79190610975565b6106f1565b6040516101d991906109bd565b60405180910390f35b6101fc60048036038101906101f79190610975565b610711565b005b60026020528060005260406000206000915054906101000a900460ff1681565b6003602052816000526040600020818154811061023a57600080fd5b9060005260206000209060040201600091509150508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060010154908060020154908060030160009054906101000a900460ff16905084565b600033600260008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1661031e576040517f91f3d25700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600033858560405161032f90610905565b61033b93929190610bde565b604051809103906000f080158015610357573d6000803e3d6000fd5b5090506000819050600060405180608001604052808373ffffffffffffffffffffffffffffffffffffffff168152602001888152602001600081526020016001151581525090503373ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f6056366dba45431fd6a8854ad9f2594942b02c4f2c3f6fbc329b3079b027b8b460405160405180910390a3600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081908060018154018082558091505060019003906000526020600020906004020160009091909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550602082015181600101556040820151816002015560608201518160030160006101000a81548160ff02191690831515021790555050508194505050505092915050565b6104f3610797565b6104fd600061081e565b565b610507610797565b80600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff167f2e9a07ab0ef11890b39d65dfe24483d336a120142f91dffc5cc9ad47ec1e5be7826040516105a491906109bd565b60405180910390a25050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6105e1610797565b60018060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1661069157600080fd5b61069d8160ff166108e2565b6106d3576040517f721dbfea00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b80600060146101000a81548160ff021916908360ff16021790555050565b60016020528060005260406000206000915054906101000a900460ff1681565b610719610797565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff160361078b5760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016107829190610af1565b60405180910390fd5b6107948161081e565b50565b61079f6108fd565b73ffffffffffffffffffffffffffffffffffffffff166107bd6105b0565b73ffffffffffffffffffffffffffffffffffffffff161461081c576107e06108fd565b6040517f118cdaa70000000000000000000000000000000000000000000000000000000081526004016108139190610af1565b60405180910390fd5b565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b6000816000111580156108f65750601e8211155b9050919050565b600033905090565b610ea480610c1683390190565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061094282610917565b9050919050565b61095281610937565b811461095d57600080fd5b50565b60008135905061096f81610949565b92915050565b60006020828403121561098b5761098a610912565b5b600061099984828501610960565b91505092915050565b60008115159050919050565b6109b7816109a2565b82525050565b60006020820190506109d260008301846109ae565b92915050565b6000819050919050565b6109eb816109d8565b81146109f657600080fd5b50565b600081359050610a08816109e2565b92915050565b60008060408385031215610a2557610a24610912565b5b6000610a3385828601610960565b9250506020610a44858286016109f9565b9150509250929050565b610a5781610937565b82525050565b610a66816109d8565b82525050565b6000608082019050610a816000830187610a4e565b610a8e6020830186610a5d565b610a9b6040830185610a5d565b610aa860608301846109ae565b95945050505050565b60008060408385031215610ac857610ac7610912565b5b6000610ad6858286016109f9565b9250506020610ae7858286016109f9565b9150509250929050565b6000602082019050610b066000830184610a4e565b92915050565b610b15816109a2565b8114610b2057600080fd5b50565b600081359050610b3281610b0c565b92915050565b60008060408385031215610b4f57610b4e610912565b5b6000610b5d85828601610960565b9250506020610b6e85828601610b23565b9150509250929050565b600060ff82169050919050565b610b8e81610b78565b8114610b9957600080fd5b50565b600081359050610bab81610b85565b92915050565b600060208284031215610bc757610bc6610912565b5b6000610bd584828501610b9c565b91505092915050565b6000606082019050610bf36000830186610a4e565b610c006020830185610a5d565b610c0d6040830184610a5d565b94935050505056fe608060405260006004556000600560006101000a81548160ff02191690831515021790555034801561003057600080fd5b50604051610ea4380380610ea48339818101604052810190610052919061014a565b600160008190555082600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550816002819055508060038190555050505061019d565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006100e1826100b6565b9050919050565b6100f1816100d6565b81146100fc57600080fd5b50565b60008151905061010e816100e8565b92915050565b6000819050919050565b61012781610114565b811461013257600080fd5b50565b6000815190506101448161011e565b92915050565b600080600060608486031215610163576101626100b1565b5b6000610171868287016100ff565b935050602061018286828701610135565b925050604061019386828701610135565b9150509250925092565b610cf8806101ac6000396000f3fe6080604052600436106100945760003560e01c80637d3d6522116100595780637d3d6522146101a15780638da5cb5b146101cc5780639049ac69146101f7578063cc6cb19a1461020e578063ed88c68e1461024b576100a3565b8062b37044146100de57806324600fc31461010957806329dcb0cf14610120578063401938831461014b5780634e69d56014610176576100a3565b366100a3576100a1610255565b005b6040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100d590610a34565b60405180910390fd5b3480156100ea57600080fd5b506100f36103c0565b6040516101009190610a6d565b60405180910390f35b34801561011557600080fd5b5061011e6103c6565b005b34801561012c57600080fd5b506101356105ee565b6040516101429190610a6d565b60405180910390f35b34801561015757600080fd5b506101606105f4565b60405161016d9190610a6d565b60405180910390f35b34801561018257600080fd5b5061018b6105fa565b6040516101989190610b07565b60405180910390f35b3480156101ad57600080fd5b506101b66106eb565b6040516101c39190610b44565b60405180910390f35b3480156101d857600080fd5b506101e16106fe565b6040516101ee9190610ba0565b60405180910390f35b34801561020357600080fd5b5061020c610724565b005b34801561021a57600080fd5b5061023560048036038101906102309190610bec565b61096f565b6040516102429190610a6d565b60405180910390f35b610253610255565b005b61025d610987565b6003544210610298576040517f553ae05400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600034036102d2576040517fc6e0724200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b34600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546103219190610c48565b92505081905550346004600082825461033a9190610c48565b9250508190555060025460045410610368576001600560006101000a81548160ff0219169083151502179055505b3373ffffffffffffffffffffffffffffffffffffffff167f2a01595cddf097c90216094025db714da3f4e5bd8877b56ba86a24ecead8e543346040516103ae9190610a6d565b60405180910390a26103be6109cd565b565b60045481565b6103ce610987565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610455576040517f30cd747100000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600560009054906101000a900460ff1661049b576040517f78c754c900000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6000600454036104d7576040517f67e3990d00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6000600454905060006004819055506000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168260405161052e90610cad565b60006040518083038185875af1925050503d806000811461056b576040519150601f19603f3d011682016040523d82523d6000602084013e610570565b606091505b50509050806105ab576040517f90b8ec1800000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b7f430648de173157e069201c943adb2d4e340e7cf5b27b1b09c9cb852f03d63b56826040516105da9190610a6d565b60405180910390a150506105ec6109cd565b565b60035481565b60025481565b6060600354421015801561061b5750600560009054906101000a900460ff16155b1561065d576040518060400160405280600681526020017f4661696c6564000000000000000000000000000000000000000000000000000081525090506106e8565b600560009054906101000a900460ff16156106af576040518060400160405280600781526020017f537563636573730000000000000000000000000000000000000000000000000081525090506106e8565b6040518060400160405280600681526020017f416374697665000000000000000000000000000000000000000000000000000081525090505b90565b600560009054906101000a900460ff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b61072c610987565b600354421015610768576040517f553ae05400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600560009054906101000a900460ff16156107af576040517f78c754c900000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6000600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490506000810361082d576040517fc6e0724200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6000600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555060003373ffffffffffffffffffffffffffffffffffffffff168260405161089890610cad565b60006040518083038185875af1925050503d80600081146108d5576040519150601f19603f3d011682016040523d82523d6000602084013e6108da565b606091505b5050905080610915576040517f90b8ec1800000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff167fd7dee2702d63ad89917b6a4da9981c90c4d24f8c2bdfd64c604ecae57d8d06518360405161095b9190610a6d565b60405180910390a2505061096d6109cd565b565b60066020528060005260406000206000915090505481565b6002600054036109c3576040517f3ee5aeb500000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6002600081905550565b6001600081905550565b600082825260208201905092915050565b7f446972656374207472616e7366657273206e6f7420616c6c6f77656400000000600082015250565b6000610a1e601c836109d7565b9150610a29826109e8565b602082019050919050565b60006020820190508181036000830152610a4d81610a11565b9050919050565b6000819050919050565b610a6781610a54565b82525050565b6000602082019050610a826000830184610a5e565b92915050565b600081519050919050565b60005b83811015610ab1578082015181840152602081019050610a96565b60008484015250505050565b6000601f19601f8301169050919050565b6000610ad982610a88565b610ae381856109d7565b9350610af3818560208601610a93565b610afc81610abd565b840191505092915050565b60006020820190508181036000830152610b218184610ace565b905092915050565b60008115159050919050565b610b3e81610b29565b82525050565b6000602082019050610b596000830184610b35565b92915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610b8a82610b5f565b9050919050565b610b9a81610b7f565b82525050565b6000602082019050610bb56000830184610b91565b92915050565b600080fd5b610bc981610b7f565b8114610bd457600080fd5b50565b600081359050610be681610bc0565b92915050565b600060208284031215610c0257610c01610bbb565b5b6000610c1084828501610bd7565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000610c5382610a54565b9150610c5e83610a54565b9250828201905080821115610c7657610c75610c19565b5b92915050565b600081905092915050565b50565b6000610c97600083610c7c565b9150610ca282610c87565b600082019050919050565b6000610cb882610c8a565b915081905091905056fea2646970667358221220e51a59908d3b2aaac69cf523d46133d9e9224b2b28d16a1aab2e2be56082c72764736f6c634300081c0033a2646970667358221220f4265f72b576e35afc0676697bf1028ce451d49f17c0dbf51451997a1be6e61f64736f6c634300081c0033",
            "deployedBytecode": "0x608060405234801561001057600080fd5b506004361061009e5760003560e01c80638da5cb5b116100665780638da5cb5b1461015c57806391d026b91461017a578063a5766aa614610196578063cb5cd391146101b2578063f2fde38b146101e25761009e565b8063069445dd146100a35780631775f874146100d35780632250226814610106578063715018a6146101365780638d14f0fc14610140575b600080fd5b6100bd60048036038101906100b89190610975565b6101fe565b6040516100ca91906109bd565b60405180910390f35b6100ed60048036038101906100e89190610a0e565b61021e565b6040516100fd9493929190610a6c565b60405180910390f35b610120600480360381019061011b9190610ab1565b610298565b60405161012d9190610af1565b60405180910390f35b61013e6104eb565b005b61015a60048036038101906101559190610b38565b6104ff565b005b6101646105b0565b6040516101719190610af1565b60405180910390f35b610194600480360381019061018f9190610975565b6105d9565b005b6101b060048036038101906101ab9190610bb1565b61063b565b005b6101cc60048036038101906101c79190610975565b6106f1565b6040516101d991906109bd565b60405180910390f35b6101fc60048036038101906101f79190610975565b610711565b005b60026020528060005260406000206000915054906101000a900460ff1681565b6003602052816000526040600020818154811061023a57600080fd5b9060005260206000209060040201600091509150508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060010154908060020154908060030160009054906101000a900460ff16905084565b600033600260008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1661031e576040517f91f3d25700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600033858560405161032f90610905565b61033b93929190610bde565b604051809103906000f080158015610357573d6000803e3d6000fd5b5090506000819050600060405180608001604052808373ffffffffffffffffffffffffffffffffffffffff168152602001888152602001600081526020016001151581525090503373ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f6056366dba45431fd6a8854ad9f2594942b02c4f2c3f6fbc329b3079b027b8b460405160405180910390a3600360003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081908060018154018082558091505060019003906000526020600020906004020160009091909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550602082015181600101556040820151816002015560608201518160030160006101000a81548160ff02191690831515021790555050508194505050505092915050565b6104f3610797565b6104fd600061081e565b565b610507610797565b80600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff167f2e9a07ab0ef11890b39d65dfe24483d336a120142f91dffc5cc9ad47ec1e5be7826040516105a491906109bd565b60405180910390a25050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6105e1610797565b60018060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1661069157600080fd5b61069d8160ff166108e2565b6106d3576040517f721dbfea00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b80600060146101000a81548160ff021916908360ff16021790555050565b60016020528060005260406000206000915054906101000a900460ff1681565b610719610797565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff160361078b5760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016107829190610af1565b60405180910390fd5b6107948161081e565b50565b61079f6108fd565b73ffffffffffffffffffffffffffffffffffffffff166107bd6105b0565b73ffffffffffffffffffffffffffffffffffffffff161461081c576107e06108fd565b6040517f118cdaa70000000000000000000000000000000000000000000000000000000081526004016108139190610af1565b60405180910390fd5b565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b6000816000111580156108f65750601e8211155b9050919050565b600033905090565b610ea480610c1683390190565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061094282610917565b9050919050565b61095281610937565b811461095d57600080fd5b50565b60008135905061096f81610949565b92915050565b60006020828403121561098b5761098a610912565b5b600061099984828501610960565b91505092915050565b60008115159050919050565b6109b7816109a2565b82525050565b60006020820190506109d260008301846109ae565b92915050565b6000819050919050565b6109eb816109d8565b81146109f657600080fd5b50565b600081359050610a08816109e2565b92915050565b60008060408385031215610a2557610a24610912565b5b6000610a3385828601610960565b9250506020610a44858286016109f9565b9150509250929050565b610a5781610937565b82525050565b610a66816109d8565b82525050565b6000608082019050610a816000830187610a4e565b610a8e6020830186610a5d565b610a9b6040830185610a5d565b610aa860608301846109ae565b95945050505050565b60008060408385031215610ac857610ac7610912565b5b6000610ad6858286016109f9565b9250506020610ae7858286016109f9565b9150509250929050565b6000602082019050610b066000830184610a4e565b92915050565b610b15816109a2565b8114610b2057600080fd5b50565b600081359050610b3281610b0c565b92915050565b60008060408385031215610b4f57610b4e610912565b5b6000610b5d85828601610960565b9250506020610b6e85828601610b23565b9150509250929050565b600060ff82169050919050565b610b8e81610b78565b8114610b9957600080fd5b50565b600081359050610bab81610b85565b92915050565b600060208284031215610bc757610bc6610912565b5b6000610bd584828501610b9c565b91505092915050565b6000606082019050610bf36000830186610a4e565b610c006020830185610a5d565b610c0d6040830184610a5d565b94935050505056fe608060405260006004556000600560006101000a81548160ff02191690831515021790555034801561003057600080fd5b50604051610ea4380380610ea48339818101604052810190610052919061014a565b600160008190555082600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550816002819055508060038190555050505061019d565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006100e1826100b6565b9050919050565b6100f1816100d6565b81146100fc57600080fd5b50565b60008151905061010e816100e8565b92915050565b6000819050919050565b61012781610114565b811461013257600080fd5b50565b6000815190506101448161011e565b92915050565b600080600060608486031215610163576101626100b1565b5b6000610171868287016100ff565b935050602061018286828701610135565b925050604061019386828701610135565b9150509250925092565b610cf8806101ac6000396000f3fe6080604052600436106100945760003560e01c80637d3d6522116100595780637d3d6522146101a15780638da5cb5b146101cc5780639049ac69146101f7578063cc6cb19a1461020e578063ed88c68e1461024b576100a3565b8062b37044146100de57806324600fc31461010957806329dcb0cf14610120578063401938831461014b5780634e69d56014610176576100a3565b366100a3576100a1610255565b005b6040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100d590610a34565b60405180910390fd5b3480156100ea57600080fd5b506100f36103c0565b6040516101009190610a6d565b60405180910390f35b34801561011557600080fd5b5061011e6103c6565b005b34801561012c57600080fd5b506101356105ee565b6040516101429190610a6d565b60405180910390f35b34801561015757600080fd5b506101606105f4565b60405161016d9190610a6d565b60405180910390f35b34801561018257600080fd5b5061018b6105fa565b6040516101989190610b07565b60405180910390f35b3480156101ad57600080fd5b506101b66106eb565b6040516101c39190610b44565b60405180910390f35b3480156101d857600080fd5b506101e16106fe565b6040516101ee9190610ba0565b60405180910390f35b34801561020357600080fd5b5061020c610724565b005b34801561021a57600080fd5b5061023560048036038101906102309190610bec565b61096f565b6040516102429190610a6d565b60405180910390f35b610253610255565b005b61025d610987565b6003544210610298576040517f553ae05400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600034036102d2576040517fc6e0724200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b34600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546103219190610c48565b92505081905550346004600082825461033a9190610c48565b9250508190555060025460045410610368576001600560006101000a81548160ff0219169083151502179055505b3373ffffffffffffffffffffffffffffffffffffffff167f2a01595cddf097c90216094025db714da3f4e5bd8877b56ba86a24ecead8e543346040516103ae9190610a6d565b60405180910390a26103be6109cd565b565b60045481565b6103ce610987565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610455576040517f30cd747100000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600560009054906101000a900460ff1661049b576040517f78c754c900000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6000600454036104d7576040517f67e3990d00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6000600454905060006004819055506000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168260405161052e90610cad565b60006040518083038185875af1925050503d806000811461056b576040519150601f19603f3d011682016040523d82523d6000602084013e610570565b606091505b50509050806105ab576040517f90b8ec1800000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b7f430648de173157e069201c943adb2d4e340e7cf5b27b1b09c9cb852f03d63b56826040516105da9190610a6d565b60405180910390a150506105ec6109cd565b565b60035481565b60025481565b6060600354421015801561061b5750600560009054906101000a900460ff16155b1561065d576040518060400160405280600681526020017f4661696c6564000000000000000000000000000000000000000000000000000081525090506106e8565b600560009054906101000a900460ff16156106af576040518060400160405280600781526020017f537563636573730000000000000000000000000000000000000000000000000081525090506106e8565b6040518060400160405280600681526020017f416374697665000000000000000000000000000000000000000000000000000081525090505b90565b600560009054906101000a900460ff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b61072c610987565b600354421015610768576040517f553ae05400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600560009054906101000a900460ff16156107af576040517f78c754c900000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6000600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490506000810361082d576040517fc6e0724200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6000600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555060003373ffffffffffffffffffffffffffffffffffffffff168260405161089890610cad565b60006040518083038185875af1925050503d80600081146108d5576040519150601f19603f3d011682016040523d82523d6000602084013e6108da565b606091505b5050905080610915576040517f90b8ec1800000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff167fd7dee2702d63ad89917b6a4da9981c90c4d24f8c2bdfd64c604ecae57d8d06518360405161095b9190610a6d565b60405180910390a2505061096d6109cd565b565b60066020528060005260406000206000915090505481565b6002600054036109c3576040517f3ee5aeb500000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6002600081905550565b6001600081905550565b600082825260208201905092915050565b7f446972656374207472616e7366657273206e6f7420616c6c6f77656400000000600082015250565b6000610a1e601c836109d7565b9150610a29826109e8565b602082019050919050565b60006020820190508181036000830152610a4d81610a11565b9050919050565b6000819050919050565b610a6781610a54565b82525050565b6000602082019050610a826000830184610a5e565b92915050565b600081519050919050565b60005b83811015610ab1578082015181840152602081019050610a96565b60008484015250505050565b6000601f19601f8301169050919050565b6000610ad982610a88565b610ae381856109d7565b9350610af3818560208601610a93565b610afc81610abd565b840191505092915050565b60006020820190508181036000830152610b218184610ace565b905092915050565b60008115159050919050565b610b3e81610b29565b82525050565b6000602082019050610b596000830184610b35565b92915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610b8a82610b5f565b9050919050565b610b9a81610b7f565b82525050565b6000602082019050610bb56000830184610b91565b92915050565b600080fd5b610bc981610b7f565b8114610bd457600080fd5b50565b600081359050610be681610bc0565b92915050565b600060208284031215610c0257610c01610bbb565b5b6000610c1084828501610bd7565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000610c5382610a54565b9150610c5e83610a54565b9250828201905080821115610c7657610c75610c19565b5b92915050565b600081905092915050565b50565b6000610c97600083610c7c565b9150610ca282610c87565b600082019050919050565b6000610cb882610c8a565b915081905091905056fea2646970667358221220e51a59908d3b2aaac69cf523d46133d9e9224b2b28d16a1aab2e2be56082c72764736f6c634300081c0033a2646970667358221220f4265f72b576e35afc0676697bf1028ce451d49f17c0dbf51451997a1be6e61f64736f6c634300081c0033",
            "linkReferences": {},
            "deployedLinkReferences": {}
          }
          
	]

	// 4. –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
	const registry = new web3.eth.Contract(registryABI, registryAddress)

	// 5. –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
	const isVerified = await registry.methods
		.verifiedOrganizations(organization)
		.call()
	if (!isVerified) {
		console.log('‚ÑπÔ∏è –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –Ω–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞. –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ–º...')
		await registry.methods.verify(organization, true).send({ from: owner })
		console.log(`‚úÖ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è ${organization} —É—Å–ø–µ—à–Ω–æ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞`)
	} else {
		console.log(`‚ÑπÔ∏è –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è ${organization} —É–∂–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞`)
	}

	// 6. –°–æ–∑–¥–∞–µ–º –∫–∞–º–ø–∞–Ω–∏—é
	console.log('\n‚è≥ –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é...')
	const goal = '50000000'
	const deadline = Math.floor(Date.now() / 1000) + 30 * 24 * 60 * 60

	// –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –∫–∞–º–ø–∞–Ω–∏–∏
	const initialCampaigns = await registry.methods
		.getOrganizationCampaigns(organization)
		.call()

	// –°–æ–∑–¥–∞–µ–º –∫–∞–º–ø–∞–Ω–∏—é
	const tx = await registry.methods
		.createCampaign(goal, deadline)
		.send({ from: organization })
	console.log(`‚úÖ –ö–∞–º–ø–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∞, tx hash: ${tx.transactionHash}`)

	// –ü–æ–ª—É—á–∞–µ–º –∞–¥—Ä–µ—Å –Ω–æ–≤–æ–π –∫–∞–º–ø–∞–Ω–∏–∏
	const updatedCampaigns = await registry.methods
		.getOrganizationCampaigns(organization)
		.call()
	const newCampaignAddress = updatedCampaigns[updatedCampaigns.length - 1]
	console.log(`üìå –ê–¥—Ä–µ—Å –∫–∞–º–ø–∞–Ω–∏–∏: ${newCampaignAddress}`)

	// 7. ABI CharityCampaign (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)
	const campaignABI = [
		{
			inputs: [],
			name: 'donate',
			outputs: [],
			stateMutability: 'payable',
			type: 'function',
		},
		{
			inputs: [],
			name: 'getStatus',
			outputs: [{ internalType: 'string', name: '', type: 'string' }],
			stateMutability: 'view',
			type: 'function',
		},
	]

	// 8. –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –∫–∞–º–ø–∞–Ω–∏–∏
	const campaign = new web3.eth.Contract(campaignABI, newCampaignAddress)

	// 9. –î–µ–ª–∞–µ–º –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ
	console.log('\nüí∏ –î–µ–ª–∞–µ–º –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ...')
	const donation = web3.utils.toWei('1', 'ether')
	const donateTx = await campaign.methods.donate().send({
		from: donor,
		value: donation,
	})
	console.log(
		`‚úÖ –ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ 1 ETH –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, tx hash: ${donateTx.transactionHash}`
	)

	// 10. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
	console.log('\nüìä –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å...')
	const status = await campaign.methods.getStatus().call()
	console.log(`üìå –°—Ç–∞—Ç—É—Å –∫–∞–º–ø–∞–Ω–∏–∏: ${status}`)
}

main().catch(console.error)
